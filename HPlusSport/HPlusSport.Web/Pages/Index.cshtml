@page
@model IndexModel
@{
    ViewData["Title"] = "Home page";
}

<div>
    <h1 class="display-4">My product list</h1>
    <ul id="products-list"></ul>
</div>


@section Scripts {
<script>
    let url = "https://localhost:7077/products";
let productList = document.getElementById("products-list");

fetch(url)
    .then(response => response.json())
    .then(data => showProducts(data))
    .catch(ex => {
        alert("Error!");
        console.error(ex);
    });

function showProducts(products) {
    products.forEach(product => { 
        let li = document.createElement("li");
        let text = `${product.name} (\€${product.price})`;
        li.appendChild(document.createTextNode(text));
        productList.appendChild(li);
    });
}


</script>
}